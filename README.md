# README

## Описание

Приложение представляет собой REST API с возможностью:

1. Добавления заметок
2. Вывода списка заметок

Реализация выполнена на основе фреймворка **FastAPI** с использованием асинхронного
веб-сервера **uvicorn**. При добавлении новой заметки заголовок и тело автоматически
проверяются и исправляются сервисом Яндекс.Спеллер, чтобы в базе данных сохранялись
корректные данные.

Заметки сохраняются в базе данных **Postgres**. Аутентификация и авторизация реализованы
с использованием встроенной (hardcoded) псевдо базы данных, включающей двух
пользователей, согласно заданию.

Также, для соответствия лучшим практикам разработки на Python, добавлены pre-commit хуки
с использованием **black** и **isort** для автоматического форматирования и линтинга
кода.

## Запуск и тестирование

На текущем этапе разработки приложение предназначено для запуска в режиме разработки.
Обратите внимание, что база данных не закреплена за Docker Volume для постоянного
хранения данных. Это легко исправляется добавлением соответствующих изменений в основной
Dockerfile для **docker-compose**.

### Шаги для запуска и тестирования

1. Запустите все контейнеры:

    ```bash
    docker-compose up -d --build
    ```

2. Запустите подготовленные тесты:

    ```bash
    docker-compose exec web python -m pytest
    ```

### Примеры использования

#### Добавление заметки с проверкой и исправлением ошибок с помощью Яндекс.Спеллер

Запрос от первого пользователя:

```bash
curl -X POST "http://127.0.0.1:8004/notes/" \
-H "Authorization: Basic dXNlcjE6cGFzc3dvcmQx" \
-H "Content-Type: application/json" \
-d '{
  "title": "Ашипка",
  "content": "Первый текст с ашипкой."
}'
```

### Получение списка всех заметок первого пользователя

```bash
curl -X GET "http://127.0.0.1:8004/notes/" \
-H "Authorization: Basic dXNlcjE6cGFzc3dvcmQx"
```

### Добавление заметки от второго пользователя

```bash
 curl -X POST "http://127.0.0.1:8004/notes/" \
-H "Authorization: Basic dXNlcjI6cGFzc3dvcmQy" \
-H "Content-Type: application/json" \
-d '{
  "title": "Ашипка",
  "content": "Первый текст с ашипкой."
}'
```

### Получение списка заметок второго пользователя

```bash
curl -X GET "http://127.0.0.1:8004/notes/" \
-H "Authorization: Basic dXNlcjI6cGFzc3dvcmQy"
```

### Проверка сохраненных данных в базе данных Postgres

	1.	Подключитесь к базе данных:

```bash
docker-compose exec web-db psql -U postgres
```

	2.	Выполните следующие команды:

```bash
\c web_dev  -- подключение к нужной базе данных
\dt         -- отображение списка таблиц
SELECT * FROM note;  -- просмотр всех записей в таблице заметок
```
